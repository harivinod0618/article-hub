{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hariv\\\\Music\\\\the-better-india-comments\\\\frontend\\\\src\\\\components\\\\ViewPosts.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { Pencil, Trash, Save, X } from \"lucide-react\";\nimport \"./ViewPosts.css\"; // Add styles specific to view section\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ViewPosts = () => {\n  _s();\n  const [posts, setPosts] = useState([]);\n  const [editingPostId, setEditingPostId] = useState(null);\n  const [editedTitle, setEditedTitle] = useState(\"\");\n  const [editedContent, setEditedContent] = useState(\"\");\n  const fetchPosts = async () => {\n    try {\n      const res = await axios.get(\"http://localhost:5000/api/posts\");\n      setPosts(res.data);\n    } catch (err) {\n      console.error(\"Failed to fetch posts:\", err);\n    }\n  };\n  useEffect(() => {\n    fetchPosts();\n  }, []);\n  const handleDelete = async postId => {\n    if (!window.confirm(\"Are you sure you want to delete this post?\")) return;\n    try {\n      await axios.delete(`http://localhost:5000/api/posts/${postId}`);\n      setPosts(posts.filter(post => post._id !== postId));\n    } catch (err) {\n      console.error(\"Failed to delete post:\", err);\n      alert(\"❌ Failed to delete post\");\n    }\n  };\n  const startEditing = post => {\n    setEditingPostId(post._id);\n    setEditedTitle(post.title);\n    setEditedContent(post.content);\n  };\n  const cancelEditing = () => {\n    setEditingPostId(null);\n    setEditedTitle(\"\");\n    setEditedContent(\"\");\n  };\n  const saveEdit = async postId => {\n    try {\n      await axios.put(`http://localhost:5000/api/posts/${postId}`, {\n        title: editedTitle,\n        content: editedContent\n      });\n      setEditingPostId(null);\n      fetchPosts();\n    } catch (err) {\n      console.error(\"Failed to update post:\", err);\n      alert(\"❌ Failed to update post\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"view-posts\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"My Uploaded Posts\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), posts.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No posts uploaded yet.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }, this) : posts.map(post => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-card\",\n      children: editingPostId === post._id ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: editedTitle,\n          onChange: e => setEditedTitle(e.target.value),\n          className: \"input-field\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: editedContent,\n          onChange: e => setEditedContent(e.target.value),\n          className: \"input-field\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"button-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn save-btn\",\n            children: [/*#__PURE__*/_jsxDEV(Save, {\n              size: 16,\n              className: \"icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 5\n            }, this), \" Save\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 3\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn cancel-btn\",\n            children: [/*#__PURE__*/_jsxDEV(X, {\n              size: 16,\n              className: \"icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 5\n            }, this), \" Cancel\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 3\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 16\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: post.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: post.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 17\n        }, this), post.imageUrl && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: `http://localhost:5000${post.imageUrl}`,\n          alt: post.title,\n          className: \"post-image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"button-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn edit-btn\",\n            onClick: () => startEditing(post),\n            children: [/*#__PURE__*/_jsxDEV(Pencil, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 21\n            }, this), \" Edit\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn delete-btn\",\n            onClick: () => handleDelete(post._id),\n            children: [/*#__PURE__*/_jsxDEV(Trash, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 21\n            }, this), \" Delete\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true)\n    }, post._id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n};\n_s(ViewPosts, \"7s4O9UQCRhy3HLgjiGBJWIv+ExA=\");\n_c = ViewPosts;\nexport default ViewPosts;\nvar _c;\n$RefreshReg$(_c, \"ViewPosts\");","map":{"version":3,"names":["React","useEffect","useState","axios","Pencil","Trash","Save","X","jsxDEV","_jsxDEV","Fragment","_Fragment","ViewPosts","_s","posts","setPosts","editingPostId","setEditingPostId","editedTitle","setEditedTitle","editedContent","setEditedContent","fetchPosts","res","get","data","err","console","error","handleDelete","postId","window","confirm","delete","filter","post","_id","alert","startEditing","title","content","cancelEditing","saveEdit","put","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","type","value","onChange","e","target","size","imageUrl","src","alt","onClick","_c","$RefreshReg$"],"sources":["C:/Users/hariv/Music/the-better-india-comments/frontend/src/components/ViewPosts.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Pencil, Trash, Save, X } from \"lucide-react\";\r\nimport \"./ViewPosts.css\"; // Add styles specific to view section\r\n\r\nconst ViewPosts = () => {\r\n  const [posts, setPosts] = useState([]);\r\n  const [editingPostId, setEditingPostId] = useState(null);\r\n  const [editedTitle, setEditedTitle] = useState(\"\");\r\n  const [editedContent, setEditedContent] = useState(\"\");\r\n\r\n  const fetchPosts = async () => {\r\n    try {\r\n      const res = await axios.get(\"http://localhost:5000/api/posts\");\r\n      setPosts(res.data);\r\n    } catch (err) {\r\n      console.error(\"Failed to fetch posts:\", err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchPosts();\r\n  }, []);\r\n\r\n  const handleDelete = async (postId) => {\r\n    if (!window.confirm(\"Are you sure you want to delete this post?\")) return;\r\n    try {\r\n      await axios.delete(`http://localhost:5000/api/posts/${postId}`);\r\n      setPosts(posts.filter((post) => post._id !== postId));\r\n    } catch (err) {\r\n      console.error(\"Failed to delete post:\", err);\r\n      alert(\"❌ Failed to delete post\");\r\n    }\r\n  };\r\n\r\n  const startEditing = (post) => {\r\n    setEditingPostId(post._id);\r\n    setEditedTitle(post.title);\r\n    setEditedContent(post.content);\r\n  };\r\n\r\n  const cancelEditing = () => {\r\n    setEditingPostId(null);\r\n    setEditedTitle(\"\");\r\n    setEditedContent(\"\");\r\n  };\r\n\r\n  const saveEdit = async (postId) => {\r\n    try {\r\n      await axios.put(`http://localhost:5000/api/posts/${postId}`, {\r\n        title: editedTitle,\r\n        content: editedContent,\r\n      });\r\n      setEditingPostId(null);\r\n      fetchPosts();\r\n    } catch (err) {\r\n      console.error(\"Failed to update post:\", err);\r\n      alert(\"❌ Failed to update post\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"view-posts\">\r\n      <h2>My Uploaded Posts</h2>\r\n      {posts.length === 0 ? (\r\n        <p>No posts uploaded yet.</p>\r\n      ) : (\r\n        posts.map((post) => (\r\n          <div key={post._id} className=\"post-card\">\r\n            {editingPostId === post._id ? (\r\n              <>\r\n                <input\r\n                  type=\"text\"\r\n                  value={editedTitle}\r\n                  onChange={(e) => setEditedTitle(e.target.value)}\r\n                  className=\"input-field\"\r\n                />\r\n                <textarea\r\n                  value={editedContent}\r\n                  onChange={(e) => setEditedContent(e.target.value)}\r\n                  className=\"input-field\"\r\n                ></textarea>\r\n               <div className=\"button-group\">\r\n  <button className=\"btn save-btn\">\r\n    <Save size={16} className=\"icon\" /> Save\r\n  </button>\r\n  <button className=\"btn cancel-btn\">\r\n    <X size={16} className=\"icon\" /> Cancel\r\n  </button>\r\n</div>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <h3>{post.title}</h3>\r\n                <p>{post.content}</p>\r\n                {post.imageUrl && (\r\n                  <img\r\n                    src={`http://localhost:5000${post.imageUrl}`}\r\n                    alt={post.title}\r\n                    className=\"post-image\"\r\n                  />\r\n                )}\r\n                <div className=\"button-group\">\r\n                  <button className=\"btn edit-btn\" onClick={() => startEditing(post)}>\r\n                    <Pencil size={16} /> Edit\r\n                  </button>\r\n                  <button className=\"btn delete-btn\" onClick={() => handleDelete(post._id)}>\r\n                    <Trash size={16} /> Delete\r\n                  </button>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n        ))\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ViewPosts;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}